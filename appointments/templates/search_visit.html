{% extends 'base.html' %}

{% block content %}
{% include 'patient_navbar.html' %}
<br>
<div class="row justify-content-center">
    <div class="col-md-offset-4 col-md-8 col-md-offset-4 align-self-md-center">

        <form action="/appointments/home/search_visit/" method="post">
            {% csrf_token %}
            <div class="row">
                <div class="col-3">
                    <h4>Specjalizacja</h4>
                </div>
                <div class="col-4">
                    <h4>Miasto</h4>
                </div>
                <div class="col-3">
                    <h4>Data</h4>
                </div>

            </div>

            <div class="row">
                <div class="col-3">
                    <select id="medical_specialty" class="form-control form-control">
                        {% for speciality in specialties %}
                        <option>{{ speciality }}</option>
                        {% endfor %}
                    </select>
                </div>
                <div class="col-4">
                    <input type="text" id="city" class="form-control" placeholder="Wpisz nazwę miasta...">
                </div>
                <div class="col-3">
                    <div class="input-group date" id="datetimepicker1" data-target-input="nearest">
                        <input type="text" id="date" class="form-control datetimepicker-input"
                               data-target="#datetimepicker1"/>
                        <div class="input-group-append" data-target="#datetimepicker1" data-toggle="datetimepicker">
                            <div class="input-group-text"><i class="fa fa-calendar"></i></div>
                        </div>
                    </div>
                </div>

                 <div class="col-2">
                    <button type="submit" class="btn btn-dark button-center  ">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                             class="bi bi-search" viewBox="0 0 16 16">
                            <path fill-rule="evenodd"
                                  d="M10.442 10.442a1 1 0 0 1 1.415 0l3.85 3.85a1 1 0 0 1-1.414 1.415l-3.85-3.85a1 1 0 0 1 0-1.415z"/>
                            <path fill-rule="evenodd"
                                  d="M6.5 12a5.5 5.5 0 1 0 0-11 5.5 5.5 0 0 0 0 11zM13 6.5a6.5 6.5 0 1 1-13 0 6.5 6.5 0 0 1 13 0z"/>
                        </svg>
                        Szukaj
                    </button>
                </div>
            </div>

        </form>
    </div>
</div>


<div class="row justify-content-center">
    <div class="col-md-offset-4 col-md-9 col-md-offset-4 align-self-md-center">

        <h3 class="text-center">Wolne wizyty</h3>

        <table id="dtVerticalScrollExample" class="table table-striped table-bordered table-sm" cellspacing="0"
               width="100%">
            <thead>
            <tr align="center">
                <th class="th-sm">Specjazlizacja
                </th>
                <th class="th-sm">Imię i Nazwisko Lekarza
                </th>
                <th class="th-sm" colspan="3">Adres
                </th>
                <th class="th-sm">Data
                </th>
                <th class="th-sm">Godzina
                </th>
                <th class="th-sm">Rezerwuj</th>
            </tr>
            </thead>
            <tbody>

            {% for visit in visits %}
            <tr>
                <td align="center">{{visit.medical_specialty}}</td>
                <td align="center">{{visit.first_name_doctor}} {{visit.last_name_doctor}}</td>
                <td align="center">{{visit.clinic_name}}</td>
                <td align="center">{{visit.address_street}}</td>
                <td align="center">{{visit.address_city}}</td>
                <td align="center">{{visit.date}}</td>
                <td align="center">{{visit.time}}</td>
                <td align="center">
                    <form action="{% url 'appointments:book_visit' visit.visit_id%}"
                              method="POST">
                            {% csrf_token %}

                        <button type="submit" onclick="return confirm('Czy na pewno chcesz zarezerwować wizytę?');"
                                class="btn btn-secondary btn-sm"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-calendar-plus" viewBox="0 0 16 16">
  <path fill-rule="evenodd" d="M3.5 0a.5.5 0 0 1 .5.5V1h8V.5a.5.5 0 0 1 1 0V1h1a2 2 0 0 1 2 2v11a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2h1V.5a.5.5 0 0 1 .5-.5zM1 4v10a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V4H1z"/>
  <path fill-rule="evenodd" d="M8 7a.5.5 0 0 1 .5.5V9H10a.5.5 0 0 1 0 1H8.5v1.5a.5.5 0 0 1-1 0V10H6a.5.5 0 0 1 0-1h1.5V7.5A.5.5 0 0 1 8 7z"/>
</svg>
                        </button>
                    </form>
                </td>
            </tr>
            {% endfor %}

            </tbody>
        </table>
    </div>
</div>

<script type="text/javascript">
$(document).ready(function () {
$('#dtBasicExample').DataTable();
$('.dataTables_length').addClass('bs-select');
});

</script>

{% endblock %}